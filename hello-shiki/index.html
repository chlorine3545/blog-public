<!doctype html><html lang="zh-CN"><head><title>园子里的日光</title>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="referrer" content="no-referrer"><meta name="description" content="本文介绍了如何在Hugo中使用Shiki进行代码高亮，Shiki在服务端执行，提供了更好的性能和样式，适合构建静态网站，需满足特定前置条件和安装依赖，步骤包括配置Hugo、创建rehyperc文件和修改CSS等。"><meta name="keywords" content="博客,折腾"><meta name="application-name" content="园子里的日光"><meta name="apple-mobile-web-app-title" content="园子里的日光"><meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#1a1b1e" media="(prefers-color-scheme: dark)"><meta property="og:title" content="Hello，Shiki - 园子里的日光"><meta property="og:description" content="本文介绍了如何在Hugo中使用Shiki进行代码高亮，Shiki在服务端执行，提供了更好的性能和样式，适合构建静态网站，需满足特定前置条件和安装依赖，步骤包括配置Hugo、创建rehyperc文件和修改CSS等。"><meta property="og:type" content="article"><meta property="og:url" content="https://chlor.me/hello-shiki/"><meta property="og:site_name" content="园子里的日光"><meta property="article:published_time" content="2024-08-18T00:00:00+00:00"><meta property="article:modified_time" content="2024-08-18T00:00:00+00:00"><meta property="article:author" content="Chlorine"><meta property="article:tag" content="博客"><meta property="article:tag" content="折腾"><meta property="article:section" content="逍遥游"><meta property="og:image" content="https://img.clnya.fun/cover/hello-shiki-cover.webp"><title>Hello，Shiki | 园子里的日光</title>
<link rel="icon" href="/favicon.svg" type="image/svg+xml"><script>(function(){const e=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");(e==="dark"||e==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.documentElement.classList.add("dark")})()</script><link rel="stylesheet" href="/css/main.min.e464c965adcb359ccf50018707280010cd22711ea4585b4f4f3a54d6cefb9f9f.css" integrity="sha256-5GTJZa3LNZzPUAGHBygAEM0icR6kWFtPTzpU1s77n58=" crossorigin="anonymous"><link rel="stylesheet" href="/css/uno.min.416df9943316c2a6b2717afb8023203c52ed8e1d86d9efd819b9eec5310a99a5.css" integrity="sha256-QW35lDMWwqaycXr7gCMgPFLtjh2G2e/YGbnuxTEKmaU=" crossorigin="anonymous"><link rel="stylesheet" href="/css/prose.min.f0c212c4b13681cfb352c460e3a6a4c4a4345f7f9a38a1b6cad7f42c5204b2ac.css" integrity="sha256-8MISxLE2gc+zUsRg46akxKQ0X3+aOKG2ytf0LFIEsqw=" crossorigin="anonymous"><link rel="stylesheet" href="/css/lightbox.min.ffc5cc4e2e6402cf607cdbb904a5d747f8443612c8cb8014ab901cc6c41f5dd2.css" integrity="sha256-/8XMTi5kAs9gfNu5BKXXR/hENhLIy4AUq5AcxsQfXdI=" crossorigin="anonymous"><link rel="stylesheet" href="/css/scroll.min.c86a4db3c7b214919b90295be86a8ac6490610845c0f6d8cd8cc7d230478a22e.css" integrity="sha256-yGpNs8eyFJGbkClb6GqKxkkGEIRcD22M2Mx9IwR4oi4=" crossorigin="anonymous"><link rel="stylesheet" href="/css/components/shiki.min.c0e6db88b257cd1eb6333abe1275a053124ebdc0c8e7c930a89591f44c43c577.css" integrity="sha256-wObbiLJXzR62Mzq+EnWgUxJOvcDI58kwqJWR9ExDxXc=" crossorigin="anonymous"><link rel="stylesheet" href="/css/components/clickcopy.min.84a456e78e8f6cbbd747aa26ded29875ddb051d01f29ff9185ebd9aee32ef397.css" integrity="sha256-hKRW546PbLvXR6om3tKYdd2wUdAfKf+RhevZruMu85c=" crossorigin="anonymous"><link rel="stylesheet" href="/css/custom.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css" integrity="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" crossorigin="anonymous"><script src="/js/components/lightbox.9bc8b6a23d67e97480f013aa933f45e43ff50ca0f5ad37b9b4da1db6ce09b901.js" integrity="sha256-m8i2oj1n6XSA8BOqkz9F5D/1DKD1rTe5tNodts4JuQE=" crossorigin="anonymous" defer></script><script src="/js/components/clickcopy.5bbf4d054a73a21043f7d84298fc4772b74b329b7609640ee165a537d054c93c.js" integrity="sha256-W79NBUpzohBD99hCmPxHcrdLMpt2CWQO4WWlN9BUyTw=" crossorigin="anonymous" defer></script></head><body class="flex flex-col min-h-screen bg-background text-foreground dark:bg-background-dark dark:text-foreground-dark transition-colors"><div id="loading-screen" class="fixed inset-0 z-[100] bg-background flex items-center justify-center transition-opacity duration-500"><div class="flex flex-col items-center gap-4"><div class="relative w-12 h-12"><div class="absolute inset-0 border-t-2 border-primary/20 rounded-full"></div><div class="absolute inset-0 border-t-2 border-primary rounded-full animate-spin"></div></div><div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-primary/80 animate-bounce-delay-1"></div><div class="w-1.5 h-1.5 rounded-full bg-primary/80 animate-bounce-delay-2"></div><div class="w-1.5 h-1.5 rounded-full bg-primary/80 animate-bounce-delay-3"></div></div><div class="text-sm text-muted-foreground/70 animate-pulse">别着急，坐和放宽</div></div></div><div class="flex flex-col flex-grow"><nav class="fixed top-0 left-0 right-0 bg-background/80 dark:bg-background-dark/80 backdrop-blur z-50"><div class="container max-w-6xl mx-auto px-4 flex items-center h-16"><a href="/" class="shrink-0"><img src="https://img.clnya.fun/avatar/01.webp" alt="avatar" class="w-8 h-8 rounded-full object-cover ring-2 ring-background dark:ring-background-dark shadow-sm"></a><div class="flex mx-auto transition-all duration-300" id="nav-menu"><div class="flex items-center bg-accent/50 dark:bg-accent-dark/50 backdrop-blur rounded-full px-4 h-9 gap-6 text-sm font-medium"><div class="relative group"><a aria-label="归档" href="https://chlor.me/" class="text-muted-foreground hover:text-primary transition-colors">归档</a><div class="absolute top-full left-1/2 -translate-x-1/2 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200"><div class="w-32 py-1 rounded-lg border border-border/50 dark:border-border-dark/50 backdrop-blur shadow-lg shadow-accent/5 flex flex-col overflow-hidden"><a aria-label="分类" href="https://chlor.me/categories" class="px-2 py-1.5 text-center text-muted-foreground/70 dark:text-muted-foreground-dark/70 hover:text-primary hover:bg-accent/40 dark:hover:bg-accent-dark/40 transition-colors">分类
</a><a aria-label="时间" href="https://chlor.me/posts" class="px-2 py-1.5 text-center text-muted-foreground/70 dark:text-muted-foreground-dark/70 hover:text-primary hover:bg-accent/40 dark:hover:bg-accent-dark/40 transition-colors">时间
</a><a aria-label="标签" href="https://chlor.me/tags" class="px-2 py-1.5 text-center text-muted-foreground/70 dark:text-muted-foreground-dark/70 hover:text-primary hover:bg-accent/40 dark:hover:bg-accent-dark/40 transition-colors">标签
</a><a aria-label="系列" href="https://chlor.me/series" class="px-2 py-1.5 text-center text-muted-foreground/70 dark:text-muted-foreground-dark/70 hover:text-primary hover:bg-accent/40 dark:hover:bg-accent-dark/40 transition-colors">系列</a></div></div></div><a aria-label="友链" href="https://chlor.me/links" class="text-muted-foreground dark:text-muted-foreground-dark hover:text-primary transition-colors">友链
</a><a aria-label="如今" href="https://chlor.me/now" class="text-muted-foreground dark:text-muted-foreground-dark hover:text-primary transition-colors">如今
</a><a aria-label="关于" href="https://chlor.me/about" class="text-muted-foreground dark:text-muted-foreground-dark hover:text-primary transition-colors">关于</a></div></div><div class="absolute left-1/2 -translate-x-1/2 opacity-0 cursor-pointer transition-all duration-300 max-w-[50%] sm:max-w-[60%]" id="nav-title"><h2 class="text-base font-medium truncate hover:text-primary transition-colors" onclick="window.scrollTo({top:0,behavior:&#x22;smooth&#x22;})" aria-label="返回顶部">Hello，Shiki</h2></div><div class="flex items-center gap-2"><button type="button" id="search-button" class="shrink-0 inline-flex items-center justify-center w-9 h-9 rounded-full bg-background/80 dark:bg-background-dark/80 ring-0 dark:ring-0 border-0 dark:border-0 text-muted-foreground/70 dark:text-muted-foreground-dark/70 hover:bg-accent/50 dark:hover:bg-accent-dark/50 transition-colors" aria-label="搜索" onclick="document.querySelector(&#x22;.DocSearch-Button&#x22;).click()"><div class="i-carbon-search w-4 h-4"></div></button><div class="relative group"><button id="theme-toggle" class="shrink-0 inline-flex items-center justify-center w-9 h-9 rounded-full bg-background/80 ring-0 border-0 text-muted-foreground/70 hover:bg-accent/50 transition-colors" aria-label="切换主题"><div class="i-carbon-sun w-4 h-4"></div></button><div class="absolute right-0 top-full mt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200"><div class="w-9 flex flex-col rounded-xl shadow-sm shadow-accent/5"><button class="w-9 h-9 flex items-center justify-center rounded-full bg-background ring-1 ring-border dark:ring-white/40 border-0 text-muted-foreground/70 hover:bg-accent/50 hover:text-foreground transition-colors my-0.5" onclick="setTheme(&#x22;light&#x22;)" aria-label=""><div class="i-carbon-sun w-4 h-4"></div></button>
<button class="w-9 h-9 flex items-center justify-center rounded-full bg-background ring-1 ring-border dark:ring-white/40 border-0 text-muted-foreground/70 hover:bg-accent/50 hover:text-foreground transition-colors my-0.5" onclick="setTheme(&#x22;dark&#x22;)" aria-label=""><div class="i-carbon-moon w-4 h-4"></div></button>
<button class="w-9 h-9 flex items-center justify-center rounded-full bg-background ring-1 ring-border dark:ring-white/40 border-0 text-muted-foreground/70 hover:bg-accent/50 hover:text-foreground transition-colors my-0.5" onclick="setTheme(&#x22;auto&#x22;)" aria-label=""><div class="i-carbon-screen w-4 h-4"></div></button></div></div></div></div></div></nav><link rel="preconnect" href="https://6O8RM1BUT3-dsn.algolia.net" crossorigin=""><link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/@docsearch/css@3" crossorigin="anonymous"><link rel="stylesheet" href="/css/components/search/docsearch.min.e9ab6523c0591ffe9d81ad080ff72fb1b120253095c4d22c3772cc170c9eec2e.css" integrity="sha256-6atlI8BZH/6dga0ID/cvsbEgJTCVxNIsN3LMFwye7C4=" crossorigin="anonymous"><div id="docsearch"></div><script src="https://cdn.jsdmirror.com/npm/@docsearch/js@3" crossorigin="anonymous" defer></script><script>document.addEventListener("DOMContentLoaded",function(){docsearch({appId:"6O8RM1BUT3",apiKey:"ceb081eaca8bade865cec00ef9e754e8",indexName:"yoghurtlee",container:"#docsearch",placeholder:"Nyanpasu~"})})</script><script>function getTheme(){const e=localStorage.getItem("theme");return e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function setTheme(e){const t=document.documentElement;if(t.classList.remove("light","dark"),e==="dark")t.classList.add("dark");else if(e==="light")t.classList.add("light");else{const e=window.matchMedia("(prefers-color-scheme: dark)").matches;e?t.classList.add("dark"):t.classList.add("light")}localStorage.setItem("theme",e),updateThemeIcon(e)}function updateThemeIcon(e){const t=document.getElementById("theme-toggle"),n=e==="dark"?"i-carbon-moon":e==="light"?"i-carbon-sun":"i-carbon-screen";t.innerHTML=`<div class="${n} w-4 h-4 text-muted-foreground/70 dark:text-muted-foreground-dark/70"></div>`}document.addEventListener("DOMContentLoaded",function(){const e=getTheme();setTheme(e),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("theme")==="auto"&&setTheme("auto")})}),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("nav-menu"),t=document.getElementById("nav-title");let s=window.scrollY;const o=100;function n(){const n=window.scrollY;n>o?(e.style.opacity="0",e.style.pointerEvents="none",t.style.opacity="1",t.style.pointerEvents="auto"):(e.style.opacity="1",e.style.pointerEvents="auto",t.style.opacity="0",t.style.pointerEvents="none"),s=n}window.addEventListener("scroll",n),n()})</script><main class="flex-grow"><div class="container max-w-6xl mx-auto px-4 pt-24 pb-16"><div class="flex gap-16"><div class="relative"><div class="flex gap-8 max-w-6xl mx-auto px-4 py-12 md:py-20"><div class="w-full lg:max-w-3xl"><header class="mb-12"><h1 class="text-3xl font-bold mb-6">Hello，Shiki</h1></header><div class="relative my-8 p-6 rounded-xl border border-border/40 dark:border-border-dark/40 backdrop-blur transition-all duration-300 hover:border-border/60 dark:hover:border-border-dark/60" id="ai-summary-toggle"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="i-carbon-ai-status w-5 h-5 text-primary dark:text-primary-dark"></div><span class="text-base font-medium">AI 摘要</span></div><div class="flex items-center gap-3"><span class="px-2.5 py-0.5 text-xs rounded-md text-primary/80 dark:text-primary-dark/80 ring-1 ring-primary/20 dark:ring-primary-dark/20">109酱
</span><button class="group bg-inherit border-none ring-1 ring-gray-600 dark:ring-gray-400" aria-label="展开/收起摘要"><div class="i-carbon-chevron-down w-5 h-5 text-muted-foreground/60 dark:text-muted-foreground-dark/60 transition-transform duration-200 ease-out" id="ai-summary-icon"></div></button></div></div><div class="my-4 border-t border-border/30 dark:border-border-dark/30"></div><div class="overflow-hidden transition-[height,opacity] duration-200 ease-out" style="height:0;opacity:0" id="ai-summary-content"><div class="text-sm leading-relaxed text-muted-foreground dark:text-muted-foreground-dark">本文介绍了如何在Hugo中使用Shiki进行代码高亮，Shiki在服务端执行，提供了更好的性能和样式，适合构建静态网站，需满足特定前置条件和安装依赖，步骤包括配置Hugo、创建rehyperc文件和修改CSS等。</div></div></div><script defer>document.getElementById("ai-summary-toggle")?.addEventListener("click",function(){const e=document.getElementById("ai-summary-content"),t=document.getElementById("ai-summary-icon"),n=e.querySelector("div");e.style.height==="0px"||e.style.height===""?(e.style.height=n.offsetHeight+"px",e.style.opacity="1",t.style.transform="rotate(180deg)"):(e.style.height="0px",e.style.opacity="0",t.style.transform="")}),window.addEventListener("resize",()=>{const e=document.getElementById("ai-summary-content"),t=e.querySelector("div");e.style.height!=="0px"&&e.style.height!==""&&(e.style.height=t.offsetHeight+"px")})</script><article class="prose prose-neutral dark:prose-invert max-w-none"><p>各位老友们好，我是 Chlorine。继续高强度水文。</p><p>本期的主题是 Hugo 的代码高亮，主要参考了<a href="https://www.eallion.com">蜗牛大神</a>的教程：<a href="https://www.eallion.com/hugo-syntax-highlight-shiki/">在 Hugo 中使用 Shiki</a>。感谢前辈的付出。</p><h2 id="前言">前言</h2><p>Hugo 的代码高亮基于 Chroma。这是个用 Go 语言写的库，好处是性能极高，坏处是不太聪明。比如我之前的文章 <a href="/hello-searxng/">Hello，SearXNG</a>，里面有一段 PowerShell 脚本，结果：</p><p></p><figure class="my-8"><img src="https://img.clnya.fun/IMG-20240818100304.avif" alt="" class="mx-auto rounded-lg block" loading="lazy"></figure><p></p><p>嗯……这个效果不能说是尽善尽美吧，至少也可以说是聊胜于无。</p><p>其他的部分，像 <code>docker-compose</code>、<code>git</code> 之类的命令高亮不了，已经是紫荆园的麻辣香锅——家常便饭了。</p><p>那怎么修复？无非两个招：自己写 Lexer<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>，或者引入第三方库。</p><p>不清楚哪位勇士有第一项所需的娴熟的专业技能、大把的闲暇时间和超人的折腾勇气，反正小氯自认为没有。</p><p>Hugo 的第三方代码高亮库很多，比方说 <code>Highlight.js</code> 和 <code>Prime.js</code>，其优缺点可谓各有千秋。但它们都有一个致命的缺点：<strong>都需要在客户端执行大量的 JavaScript 代码</strong>。这就势必会对性能造成可怕的影响。如果大家没有什么感知的话，请参考下面的 Twikoo 的加载需要多久。</p><p>那有没有办法在服务端执行代码，把压力放在网站构建过程中呢？</p><p>有，方法就是我们今天的主角——Shiki。</p><h2 id="shiki-简介">Shiki 简介</h2><p>Shiki 这个名字来自于日语的「式」（しき），意思就是「样式」。此外如果我记得没错，Shiki 应该还有季节、四季的意思，当然这不重要。</p><p><a href="https://shiki.style">Shiki</a> 是一个基于 VS Code 语法高亮引擎（没错，就是那个 VS Code）的代码高亮库。其基于 TextMate 语法定义文件和 WebAssembly 技术提供快速精确的代码高亮。</p><p>Shiki 很特别的一点在于：<strong>它在执行时会扫描指定路径的 HTML 文件，并且将各种语法 token 附加上内联样式</strong>。这使得 Shiki 非常适合用来为 Hugo 这样的静态网站构建工具添加高亮，无它，扫一遍 <code>public</code> 就行了。</p><p>顺便说一句：Shiki 是 Pine Wu 和 Anthony Fu 等前端大神的力作 :)</p><h2 id="前置要求">前置要求</h2><p>请注意，如果您的已有条件和需求不满足下面所述，那小氯推荐您还是先别看文章了，还是先去紫荆公寓的公共空间喝杯茶更能体现对您生命的尊重。<del>没错我是直接从上一篇文章复制过来的</del></p><p>条件：</p><ul><li>已经能用 Hugo 构建静态网站</li><li>对 GitHub Actions 和 Vercel 等自动构建的流程有一定了解</li><li>本地已经配置了一个 JavaScript 运行时及包管理器，例如 <code>Node.js</code> 或者 <code>Bun.js</code>。我们以下均使用 <code>Bun.js</code> 进行演示。</li></ul><p>要求：</p><ul><li>对 Chroma 的高亮表现不满</li><li>不希望使用 <code>Highlight.js</code> 等客户端高亮器</li></ul><h2 id="安装相关依赖">安装相关依赖</h2><p>进入你的博客根目录，运行命令：</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#4078F2;--shiki-dark:#61AFEF">bun</span><span style="color:#50A14F;--shiki-dark:#98C379"> i</span><span style="color:#50A14F;--shiki-dark:#98C379"> shiki</span><span style="color:#50A14F;--shiki-dark:#98C379"> @shikijs/rehype</span><span style="color:#50A14F;--shiki-dark:#98C379"> rehype-cli</span></span></code></pre><p>这应该会自动为你创建 <code>node_modules</code>、<code>bun.lockb</code> 和 <code>package.json</code>。记得把 <code>node_nodules</code> 文件夹加到 <code>.gitignore</code> 里面——如果没有自动添加的话。</p><h2 id="配置-hugo">配置 Hugo</h2><p>修改 <code>hugo.toml</code> 或者你其他名字的配置文件，将 <code>codeFences</code> 改为 <code>false</code>。如果没有请自行创建，像这样：</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">[</span><span style="color:#4078F2;--shiki-dark:#61AFEF">markup</span><span style="color:#383A42;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    [</span><span style="color:#4078F2;--shiki-dark:#61AFEF">markup</span><span style="color:#383A42;--shiki-dark:#ABB2BF">.</span><span style="color:#4078F2;--shiki-dark:#61AFEF">highlight</span><span style="color:#383A42;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">      codeFences</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> = </span><span style="color:#986801;--shiki-dark:#D19A66">false</span></span></code></pre><h2 id="创建-rehyperc">创建 <code>.rehyperc</code></h2><p>如果我没猜错的话，这应该是 rehype 的配置文件了。看起来跟个 <code>JSON</code> 似的。</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">  "plugins"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    [</span></span>
<span class="line"><span style="color:#50A14F;--shiki-dark:#98C379">      "@shikijs/rehype"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">      {</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">        "themes"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">          "light"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">: </span><span style="color:#50A14F;--shiki-dark:#98C379">"你的日间主题"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">          "dark"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">: </span><span style="color:#50A14F;--shiki-dark:#98C379">"你的夜间主题"</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">  ]</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre><p>主题列表在<a href="https://shiki.style/themes">这里</a>，挑个自己喜欢的吧。效果没必要像我一样每次都重新构建，在 VS Code 里面搜索同名主题看就行了。我比较选综，就用了 One Dark Pro 系列的。</p><p>rehype 这东西很神奇，可以对 HTML 各种爆改。当然，咱们这里用的就是其中一个插件，如果想进一步探索请看<a href="https://github.com/rehypejs/rehype/blob/main/doc/plugins.md">这里</a>，如果有什么好的创意也可以和我分享，小氯洗耳恭听。</p><h2 id="修改-hugo-css">修改 Hugo CSS</h2><p>找到你主题的 CSS。我们要做一下样式适配。我原本的样式大概是：</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">code</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    font-family: </span><span style="color:#50A14F;--shiki-dark:#98C379">"Fira Code Light"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">, </span><span style="color:#50A14F;--shiki-dark:#98C379">"LXGW WenKai Lite"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">, </span><span style="color:#986801;--shiki-dark:#D19A66">monospace</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">code</span><span style="color:#A626A4;--shiki-dark:#C678DD">[</span><span style="color:#986801;--shiki-dark:#D19A66">class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">*=</span><span style="color:#50A14F;--shiki-dark:#98C379">"language-"</span><span style="color:#A626A4;--shiki-dark:#C678DD">]</span><span style="color:#A626A4;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">pre</span><span style="color:#A626A4;--shiki-dark:#C678DD">[</span><span style="color:#986801;--shiki-dark:#D19A66">class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">*=</span><span style="color:#50A14F;--shiki-dark:#98C379">"language-"</span><span style="color:#A626A4;--shiki-dark:#C678DD">]</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    white-space: </span><span style="color:#383A42;--shiki-dark:#D19A66">pre-wrap</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#A0A1A7;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /* 或 pre-line */</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    word-break: </span><span style="color:#383A42;--shiki-dark:#D19A66">break-all</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre><p>现在改成：</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">code</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    font-family: </span><span style="color:#50A14F;--shiki-dark:#98C379">"Fira Code Light"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">, </span><span style="color:#50A14F;--shiki-dark:#98C379">"LXGW WenKai Lite"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">, </span><span style="color:#986801;--shiki-dark:#D19A66">monospace</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">html</span><span style="color:#986801;--shiki-dark:#D19A66"> .shiki</span><span style="color:#A626A4;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">html</span><span style="color:#986801;--shiki-dark:#D19A66"> .shiki</span><span style="color:#E45649;--shiki-dark:#E06C75"> span</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    white-space: </span><span style="color:#383A42;--shiki-dark:#D19A66">pre-wrap</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    word-break: </span><span style="color:#383A42;--shiki-dark:#D19A66">break-all</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    overflow-wrap: </span><span style="color:#383A42;--shiki-dark:#D19A66">break-word</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    font-family: </span><span style="color:#50A14F;--shiki-dark:#98C379">"Fira Code Light"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">, </span><span style="color:#50A14F;--shiki-dark:#98C379">"LXGW WenKai Lite"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">, </span><span style="color:#986801;--shiki-dark:#D19A66">monospace</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">html</span><span style="color:#986801;--shiki-dark:#D19A66">.dark</span><span style="color:#986801;--shiki-dark:#D19A66"> .shiki</span><span style="color:#A626A4;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">html</span><span style="color:#986801;--shiki-dark:#D19A66">.dark</span><span style="color:#986801;--shiki-dark:#D19A66"> .shiki</span><span style="color:#E45649;--shiki-dark:#E06C75"> span</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    color: </span><span style="color:#0184BC;--shiki-dark:#56B6C2">var</span><span style="color:#383A42;--shiki-dark:#ABB2BF">(</span><span style="color:#E45649;--shiki-dark:#E06C75">--shiki-dark</span><span style="color:#383A42;--shiki-dark:#ABB2BF">) </span><span style="color:#A626A4;--shiki-dark:#C678DD">!important</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    white-space: </span><span style="color:#383A42;--shiki-dark:#D19A66">pre-wrap</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    word-break: </span><span style="color:#383A42;--shiki-dark:#D19A66">break-all</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    overflow-wrap: </span><span style="color:#383A42;--shiki-dark:#D19A66">break-word</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    font-family: </span><span style="color:#50A14F;--shiki-dark:#98C379">"Fira Code Light"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">, </span><span style="color:#50A14F;--shiki-dark:#98C379">"LXGW WenKai Lite"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">, </span><span style="color:#986801;--shiki-dark:#D19A66">monospace</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre><p>大家照猫画虎即可。</p><h2 id="配置脚本命令">配置脚本命令</h2><p>在根目录的 <code>package.json</code> 下面添加这样的脚本命令：</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#50A14F;--shiki-dark:#98C379">"scripts"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">    "shiki"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">: </span><span style="color:#50A14F;--shiki-dark:#98C379">"bunx rehype-cli public -o"</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre><p>大体而言改完之后你的文件应该看起来像是：</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">    "dependencies"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">        "@shikijs/rehype"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">: </span><span style="color:#50A14F;--shiki-dark:#98C379">"^1.13.0"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">        "rehype-cli"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">: </span><span style="color:#50A14F;--shiki-dark:#98C379">"^12.0.0"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">        "shiki"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">: </span><span style="color:#50A14F;--shiki-dark:#98C379">"^1.13.0"</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">    "scripts"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">        "shiki"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">: </span><span style="color:#50A14F;--shiki-dark:#98C379">"bunx rehype-cli public -o"</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre><p>当然，shiki 这个名字你可以随便起，然后就可以在根目录下运行 <code>bun run shiki</code> 对构建产物进行替换了。如果报错，大概率是因为你使用了不支持的语言或者错误的语言代码（比方说，<code>html</code> 写成 <code>HTML</code>）。可以在<a href="https://shiki.style/languages">这里</a>查看标准化的代号表。</p><h2 id="vercel-构建命令">Vercel 构建命令</h2><p>GitHub Actions 版本的可以看上面蜗牛大神的教程。</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="color:#50A14F;--shiki-dark:#98C379"> themes/efimero</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> &#x26;&#x26; </span><span style="color:#4078F2;--shiki-dark:#61AFEF">bun</span><span style="color:#50A14F;--shiki-dark:#98C379"> install</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> &#x26;&#x26; </span><span style="color:#4078F2;--shiki-dark:#61AFEF">bun</span><span style="color:#50A14F;--shiki-dark:#98C379"> run</span><span style="color:#50A14F;--shiki-dark:#98C379"> build</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> &#x26;&#x26; </span><span style="color:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="color:#50A14F;--shiki-dark:#98C379"> ../..</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> &#x26;&#x26; </span><span style="color:#4078F2;--shiki-dark:#61AFEF">hugo</span><span style="color:#986801;--shiki-dark:#D19A66"> --gc</span><span style="color:#986801;--shiki-dark:#D19A66"> --minify</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> &#x26;&#x26; </span><span style="color:#4078F2;--shiki-dark:#61AFEF">bun</span><span style="color:#50A14F;--shiki-dark:#98C379"> install</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> &#x26;&#x26; (</span><span style="color:#4078F2;--shiki-dark:#61AFEF">bun</span><span style="color:#50A14F;--shiki-dark:#98C379"> run</span><span style="color:#50A14F;--shiki-dark:#98C379"> shiki</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> || </span><span style="color:#0184BC;--shiki-dark:#56B6C2">true</span><span style="color:#383A42;--shiki-dark:#ABB2BF">)</span></span></code></pre><p>这大概就是完整的构建命令了。最后的 <code>|| true</code> 是为了防止报错导致的构建失败。</p><h2 id="自动化">自动化</h2><p>大家知道，小氯是个被 C++ <del>荼毒</del>熏陶过的计算机系学生，因此习惯使用 Makefile 整合所有构建过程。</p><p>不过 Makefile 有个致命的缺点：<strong>只能一步一步执行命令</strong>。而 <code>bun run shiki</code> 应该在 <code>hugo server -D</code> <strong>构建 public 文件夹完成，但是未结束（只有我们手动停止这个命令才能结束）</strong> 时执行。使用后台运行的指令的话，又没办法准确把控时机。唯一的方法可能就是使用 <code>fswatch</code> 了，但是这样又会造成不必要的性能开销。</p><p>对于不经常折腾主题，只是发布内容的老友来说，这其实不是问题，主要对于小氯这样的喜欢折腾主题的人比较麻烦。现在只能是每次手动执行下，或者干脆只 <code>make</code>，缺点就是高亮没了。</p><h2 id="去掉行号">去掉行号</h2><p>在本地测试的时候我发现 Hugo 代码块的行号变得非常抽象，具体来说，10 居然会换行变成 1 和 0。改 <code>hugo.toml</code> 不管用，于是采取最简单粗暴的方法：CSS 隐藏。</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#986801;--shiki-dark:#D19A66">.custom-md</span><span style="color:#E45649;--shiki-dark:#E06C75"> code</span><span style="color:#E45649;--shiki-dark:#E06C75"> span</span><span style="color:#986801;--shiki-dark:#D19A66">.line</span><span style="color:#986801;--shiki-dark:#56B6C2">:before</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    display: </span><span style="color:#383A42;--shiki-dark:#D19A66">none</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre><h2 id="结语">结语</h2><p>又水了篇文章，内心毫无<del>波兰</del>波澜。</p><p>Shiki 的效果确实出挑，虽然会显著加长构建时间，但是也算可以接受。这样代码高亮看起来就好看多了。</p><p>以及一个新消息：我准备为主域名重新备案啦！这期间网站评论可能会关闭（看侧边栏的公告即可），但是其他功能不受影响。可以给我发邮件来互动~</p><div class="footnotes" role="doc-endnotes"><hr><ol><li id="fn:1"><p>Lexer，即词法分析器或扫描器，是编译器的第一阶段。其任务是读取源代码文本，并将其分解成一系列的标记（tokens）。每个标记代表了源代码中的一个有意义的片段，比如关键字、标识符、字面量、运算符等。Lexer 的输出是源代码的抽象表示，它为后续的语法分析（parser）提供了基础。 <a href="#fnref:1" class="footnote-backref" role="doc-backlink">↩︎</a></p></li></ol></div></article><div class="mt-12 md:mt-16 p-6 rounded-xl border border-border/40 dark:border-border-dark/40 backdrop-blur"><div class="flex flex-col sm:flex-row gap-6"><div class="hidden sm:block flex-shrink-0"><div class="w-14 h-14 rounded-xl border border-border/40 dark:border-border-dark/40 bg-accent/30 dark:bg-accent-dark/30 flex items-center justify-center"><div class="i-carbon-license w-7 h-7 text-primary/80"></div></div></div><div class="flex-1 space-y-4"><div class="space-y-1"><h3 class="text-base font-medium">版权声明</h3><div class="flex flex-wrap items-center gap-x-2 gap-y-1 text-sm text-muted-foreground/70"><span>本文采用</span>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-primary/80 hover:text-primary transition-colors"><div class="i-carbon-link w-3.5 h-3.5"></div><span>CC BY-NC-SA 4.0</span>
</a><span>许可协议。</span></div></div><div class="text-sm space-y-2 text-muted-foreground/70"><div class="flex items-start gap-2"><div class="i-carbon-checkmark w-4 h-4 mt-0.5 text-primary/70"></div><span>转载请注明出处：<span class="select-all">https://chlor.me/hello-shiki/</span></span></div><div class="flex items-start gap-2"><div class="i-carbon-checkmark w-4 h-4 mt-0.5 text-primary/70"></div><span>本文作者：Chlorine</span></div><div class="flex items-start gap-2"><div class="i-carbon-checkmark w-4 h-4 mt-0.5 text-primary/70"></div><span>发布时间：<time class="tabular-nums">2024-08-18 00:00</time></span></div></div></div></div></div><link rel="stylesheet" href="/css/components/twikoo.min.0c1c68a789714e0d50c874179f667a51d380faebfbfe7a1649e72b6e87f4138f.css" integrity="sha256-DBxop4lxTg1QyHQXn2Z6UdOA+uv7/noWSecrbof0E48=" crossorigin="anonymous"><div class="mt-12 md:mt-16 pt-6 md:pt-8 border-t border-border/40 dark:border-border-dark/40"><div class="flex items-center gap-2 mb-8"><div class="i-carbon-chat w-5 h-5 text-primary/80"></div><h3 class="text-lg font-medium">评论</h3></div><div id="twikoo" class="plain-link-container"></div></div><script src="https://cdn.jsdmirror.com/gh/chlorine3545/customcdn@2b63d63/js/twikoo/1_6_41.min.js" crossorigin="anonymous" defer></script><script>window.addEventListener("load",()=>{twikoo.init({envId:"https://tk.viento.cc",el:"#twikoo",lang:"zh-CN"})})</script><script src="/js/components/twikoo-owo.js" defer></script></div><aside class="hidden lg:block w-64 flex-shrink-0"><div class="sticky top-24 flex flex-col gap-6"><link rel="stylesheet" href="/css/components/toc.css"><div class="flex flex-col gap-4"><h3 class="text-sm font-medium text-foreground/80">目录</h3><nav class="text-sm text-foreground/70"><nav id="TableOfContents"><ul><li><a href="#前言">前言</a></li><li><a href="#shiki-简介">Shiki 简介</a></li><li><a href="#前置要求">前置要求</a></li><li><a href="#安装相关依赖">安装相关依赖</a></li><li><a href="#配置-hugo">配置 Hugo</a></li><li><a href="#创建-rehyperc">创建 <code>.rehyperc</code></a></li><li><a href="#修改-hugo-css">修改 Hugo CSS</a></li><li><a href="#配置脚本命令">配置脚本命令</a></li><li><a href="#vercel-构建命令">Vercel 构建命令</a></li><li><a href="#自动化">自动化</a></li><li><a href="#去掉行号">去掉行号</a></li><li><a href="#结语">结语</a></li></ul></nav></nav></div><div class="flex flex-col gap-4"><h3 class="text-sm font-medium text-foreground/80">阅读进度</h3><div class="relative h-1 bg-border/50 rounded-full overflow-hidden"><div id="reading-progress" class="absolute inset-y-0 left-0 bg-primary/80 transition-all duration-150" style="width:0%"></div></div><div class="text-sm text-muted-foreground text-center"><span id="percent">0</span>% 已读</div></div><script src="/js/components/reading-progress.e3f08ae433dbb92815c63445f7b352616aec446a0cc33300d08d0d5335dfda4e.js" integrity="sha256-4/CK5DPbuSgVxjRF97NSYWrsRGoMwzMA0I0NUzXf2k4=" crossorigin="anonymous" defer></script></div></aside></div><div id="reading-progress-ball" class="lg:hidden fixed right-4 bottom-20 w-12 h-12 rounded-full backdrop-blur shadow-lg border border-border/20 dark:border-border-dark/20 flex items-center justify-center text-sm font-medium tabular-nums transition-all duration-300 transform translate-y-24 opacity-0">0%</div><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("reading-progress-ball"),t=document.querySelector("article");function n(){const o=t.getBoundingClientRect(),s=window.innerHeight,i=t.offsetHeight;let n=(s-o.top)/(i-s)*100;n=Math.min(100,Math.max(0,n)),e&&(e.textContent=`${Math.round(n)}%`,n>0&&n<100?e.classList.remove("translate-y-24","opacity-0"):e.classList.add("translate-y-24","opacity-0"))}window.addEventListener("scroll",n),n()})</script></div></div></div></main></div><footer class="plain-link-container mt-auto py-4 backdrop-blur border-t border-border/50"><div class="container mx-auto px-4"><div class="flex flex-col gap-6"><div class="hidden mt-3 md:flex items-center gap-4 text-sm text-muted-foreground/70"><script type="text/javascript">function formatNumber(e){return e<10?"0"+e:e}function runtime(){const t=new Date("12/15/2023 12:00:00"),n=new Date,e=n-t,s=Math.floor(e/(1e3*60*60*24)),o=Math.floor(e/(1e3*60*60)%24),i=Math.floor(e/(1e3*60)%60),a=Math.floor(e/1e3%60),r=`${s} 天 ${formatNumber(o)} : ${formatNumber(i)} : ${formatNumber(a)}`;document.getElementById("runningtime").innerHTML=r}document.addEventListener("DOMContentLoaded",()=>{runtime(),setInterval(runtime,1e3)})</script><div class="flex items-center gap-2"><div class="i-carbon-time w-4 h-4"></div><span class="tabular-nums font-mono tracking-wider"><span class="text-primary/70">已运行</span>
<span id="runningtime" class="ml-1"></span></span></div><span class="w-1 h-1 rounded-full bg-muted-foreground/30"></span>
<script type="text/javascript">function formatNumber(e){return e<10?"0"+e:e}function runtime(){const t=new Date("12/15/2023 12:00:00"),n=new Date,e=n-t,s=Math.floor(e/(1e3*60*60*24)),o=Math.floor(e/(1e3*60*60)%24),i=Math.floor(e/(1e3*60)%60),a=Math.floor(e/1e3%60),r=`${s} 天 ${formatNumber(o)} : ${formatNumber(i)} : ${formatNumber(a)}`;document.getElementById("runningtime").innerHTML=r}document.addEventListener("DOMContentLoaded",()=>{runtime(),setInterval(runtime,1e3)})</script><div class="flex items-center gap-2"><div class="i-carbon-text-font w-4 h-4"></div><span>共 <span class="tabular-nums font-mono">220544</span> 字
<span class="mx-1">·</span>
写完一本 莫泊桑 的《一生》了!</span></div></div><div class="hidden md:visible h-px bg-border/10"></div><div class="flex flex-col md:flex-row items-center justify-between gap-3 text-sm text-muted-foreground/60"><div class="flex flex-col md:flex-row items-center gap-2 md:gap-4"><span>© 2025 Chlorine</span><div class="flex items-center gap-4"><span>Powered by <a href="https://gohugo.io" target="_blank" rel="noopener noreferrer" class="hover:text-primary transition-colors">Hugo</a></span>
<span>Theme <a href="https://github.com/chlorine3545/hugo-theme-hermeneutics" target="_blank" rel="noopener noreferrer" class="hover:text-primary transition-colors">Hermeneutics</a></span></div></div><div class="flex flex-col md:flex-row items-center gap-2 md:gap-4"><a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 hover:text-primary transition-colors"><span>京ICP备2024074926号-5</span>
</a><span class="hidden md:inline text-border/40">|</span>
<a href="http://www.beian.gov.cn/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 hover:text-primary transition-colors"><span>京公网安备11010802044863号</span>
</a><span class="hidden md:inline text-border/40">|</span>
<a href="https://icp.gov.moe/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 hover:text-primary transition-colors"><span>萌ICP备20240711号</span></a></div></div></div></div></footer><footer><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("loading-screen");let t;function n(){e&&(e.style.opacity="0",setTimeout(()=>{e.style.display="none"},400)),t&&(clearTimeout(t),t=null)}function s(){e&&(e.style.display="flex",e.offsetHeight,e.style.opacity="1",t=setTimeout(n,3e3))}window.addEventListener("load",n),window.addEventListener("pageshow",function(e){e.persisted&&n()}),document.addEventListener("click",function(e){const t=e.target.closest("a");t&&t.href&&!t.href.startsWith("#")&&!t.href.includes("#")&&t.href!==window.location.href&&!t.hasAttribute("download")&&t.target!=="_blank"&&t.hostname===window.location.hostname&&(e.preventDefault(),s(),setTimeout(()=>{window.location.href=t.href},500))}),n()})</script></footer></body></html>