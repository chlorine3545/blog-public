<!doctype html><html lang="zh-CN"><head><title>园子里的日光</title>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="referrer" content="no-referrer"><meta name="description" content="本文记录了作者最近优化 Hugo 博客的过程，包括优化 GitHub 卡片、重构 CSS 和侧边栏等。优化包括样式、API 逻辑、错误处理等，重构 CSS 采用 SCSS 方法，导入特定页面样式。侧边栏优化了公告、目录、移动端显示和图标，使得代码结构更加整洁。"><meta name="keywords" content="博客,折腾"><meta name="application-name" content="园子里的日光"><meta name="apple-mobile-web-app-title" content="园子里的日光"><meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#1a1b1e" media="(prefers-color-scheme: dark)"><meta property="og:title" content="园子装修日志（2） - 园子里的日光"><meta property="og:description" content="本文记录了作者最近优化 Hugo 博客的过程，包括优化 GitHub 卡片、重构 CSS 和侧边栏等。优化包括样式、API 逻辑、错误处理等，重构 CSS 采用 SCSS 方法，导入特定页面样式。侧边栏优化了公告、目录、移动端显示和图标，使得代码结构更加整洁。"><meta property="og:type" content="article"><meta property="og:url" content="https://chlor.me/yuanzi-decorating-2/"><meta property="og:site_name" content="园子里的日光"><meta property="article:published_time" content="2024-08-21T00:00:00+00:00"><meta property="article:modified_time" content="2024-08-21T00:00:00+00:00"><meta property="article:author" content="Chlorine"><meta property="article:tag" content="博客"><meta property="article:tag" content="折腾"><meta property="article:section" content="百草园"><meta property="og:image" content="https://img.clnya.fun/cover/yuanzi-decorating-2-cover.webp"><title>园子装修日志（2） | 园子里的日光</title>
<link rel="icon" href="/favicon.svg" type="image/svg+xml"><script>(function(){const e=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");(e==="dark"||e==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.documentElement.classList.add("dark")})()</script><link rel="stylesheet" href="/css/main.min.e464c965adcb359ccf50018707280010cd22711ea4585b4f4f3a54d6cefb9f9f.css" integrity="sha256-5GTJZa3LNZzPUAGHBygAEM0icR6kWFtPTzpU1s77n58=" crossorigin="anonymous"><link rel="stylesheet" href="/css/uno.min.3e9bb6d280f8af364980f77738039c0dde411f1fb47929a3aea41d71dac53e79.css" integrity="sha256-Ppu20oD4rzZJgPd3OAOcDd5BHx+0eSmjrqQdcdrFPnk=" crossorigin="anonymous"><link rel="stylesheet" href="/css/prose.min.93e5efa948cb99fe3c47b2bfcb0cd3093495aaca40bd57c9325b212fc6885dc3.css" integrity="sha256-k+XvqUjLmf48R7K/ywzTCTSVqspAvVfJMlshL8aIXcM=" crossorigin="anonymous"><link rel="stylesheet" href="/css/lightbox.min.b5dcdf37dfd51fbab023d00fd8e89fbff7c0e0d13bb42bee87f2ea59a5e3f42c.css" integrity="sha256-tdzfN9/VH7qwI9AP2Oifv/fA4NE7tCvuh/LqWaXj9Cw=" crossorigin="anonymous"><link rel="stylesheet" href="/css/scroll.min.c86a4db3c7b214919b90295be86a8ac6490610845c0f6d8cd8cc7d230478a22e.css" integrity="sha256-yGpNs8eyFJGbkClb6GqKxkkGEIRcD22M2Mx9IwR4oi4=" crossorigin="anonymous"><link rel="stylesheet" href="/css/components/article/shiki.min.c0e6db88b257cd1eb6333abe1275a053124ebdc0c8e7c930a89591f44c43c577.css" integrity="sha256-wObbiLJXzR62Mzq+EnWgUxJOvcDI58kwqJWR9ExDxXc=" crossorigin="anonymous"><link rel="stylesheet" href="/css/components/article/clickcopy.min.84a456e78e8f6cbbd747aa26ded29875ddb051d01f29ff9185ebd9aee32ef397.css" integrity="sha256-hKRW546PbLvXR6om3tKYdd2wUdAfKf+RhevZruMu85c=" crossorigin="anonymous"><link rel="stylesheet" href="/css/custom.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css" integrity="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" crossorigin="anonymous"><script src="/js/components/lightbox.9bc8b6a23d67e97480f013aa933f45e43ff50ca0f5ad37b9b4da1db6ce09b901.js" integrity="sha256-m8i2oj1n6XSA8BOqkz9F5D/1DKD1rTe5tNodts4JuQE=" crossorigin="anonymous" defer></script><script src="/js/components/clickcopy.5bbf4d054a73a21043f7d84298fc4772b74b329b7609640ee165a537d054c93c.js" integrity="sha256-W79NBUpzohBD99hCmPxHcrdLMpt2CWQO4WWlN9BUyTw=" crossorigin="anonymous" defer></script></head><body class="flex flex-col min-h-screen bg-background text-foreground dark:bg-background-dark dark:text-foreground-dark transition-colors"><div id="loading-screen" class="fixed inset-0 z-[100] bg-background flex items-center justify-center transition-opacity duration-500"><div class="flex flex-col items-center gap-4"><div class="relative w-12 h-12"><div class="absolute inset-0 border-t-2 border-primary/20 rounded-full"></div><div class="absolute inset-0 border-t-2 border-primary rounded-full animate-spin"></div></div><div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-primary/80 animate-bounce-delay-1"></div><div class="w-1.5 h-1.5 rounded-full bg-primary/80 animate-bounce-delay-2"></div><div class="w-1.5 h-1.5 rounded-full bg-primary/80 animate-bounce-delay-3"></div></div><div class="text-sm text-muted-foreground/70 animate-pulse">别着急，坐和放宽</div></div></div><div class="flex flex-col flex-grow"><nav class="fixed top-0 left-0 right-0 bg-background/80 dark:bg-background-dark/80 backdrop-blur z-50"><div class="container max-w-6xl mx-auto px-4 flex items-center h-16"><a href="/" class="shrink-0"><img src="https://img.clnya.fun/avatar/01.webp" alt="avatar" class="w-8 h-8 rounded-full object-cover ring-2 ring-background dark:ring-background-dark shadow-sm"></a><div class="flex mx-auto transition-all duration-300" id="nav-menu"><div class="flex items-center bg-accent/50 dark:bg-accent-dark/50 backdrop-blur rounded-full px-4 h-9 gap-6 text-sm font-medium"><div class="relative group"><a aria-label="归档" href="https://chlor.me/" class="text-muted-foreground hover:text-primary transition-colors">归档</a><div class="absolute top-full left-1/2 -translate-x-1/2 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200"><div class="w-32 py-1 rounded-lg border border-border/50 dark:border-border-dark/50 backdrop-blur shadow-lg shadow-accent/5 flex flex-col overflow-hidden"><a aria-label="分类" href="https://chlor.me/categories" class="px-2 py-1.5 text-center text-muted-foreground/70 dark:text-muted-foreground-dark/70 hover:text-primary hover:bg-accent/40 dark:hover:bg-accent-dark/40 transition-colors">分类
</a><a aria-label="时间" href="https://chlor.me/posts" class="px-2 py-1.5 text-center text-muted-foreground/70 dark:text-muted-foreground-dark/70 hover:text-primary hover:bg-accent/40 dark:hover:bg-accent-dark/40 transition-colors">时间
</a><a aria-label="标签" href="https://chlor.me/tags" class="px-2 py-1.5 text-center text-muted-foreground/70 dark:text-muted-foreground-dark/70 hover:text-primary hover:bg-accent/40 dark:hover:bg-accent-dark/40 transition-colors">标签
</a><a aria-label="系列" href="https://chlor.me/series" class="px-2 py-1.5 text-center text-muted-foreground/70 dark:text-muted-foreground-dark/70 hover:text-primary hover:bg-accent/40 dark:hover:bg-accent-dark/40 transition-colors">系列</a></div></div></div><a aria-label="友链" href="https://chlor.me/links" class="text-muted-foreground dark:text-muted-foreground-dark hover:text-primary transition-colors">友链
</a><a aria-label="如今" href="https://chlor.me/now" class="text-muted-foreground dark:text-muted-foreground-dark hover:text-primary transition-colors">如今
</a><a aria-label="关于" href="https://chlor.me/about" class="text-muted-foreground dark:text-muted-foreground-dark hover:text-primary transition-colors">关于</a></div></div><div class="absolute left-1/2 -translate-x-1/2 opacity-0 cursor-pointer transition-all duration-300 max-w-[50%] sm:max-w-[60%]" id="nav-title"><h2 class="text-base font-medium truncate hover:text-primary transition-colors" onclick="window.scrollTo({top:0,behavior:&#x22;smooth&#x22;})" aria-label="返回顶部">园子装修日志（2）</h2></div><div class="flex items-center gap-2"><button type="button" id="search-button" class="shrink-0 inline-flex items-center justify-center w-9 h-9 rounded-full bg-background/80 dark:bg-background-dark/80 ring-0 dark:ring-0 border-0 dark:border-0 text-muted-foreground/70 dark:text-muted-foreground-dark/70 hover:bg-accent/50 dark:hover:bg-accent-dark/50 transition-colors" aria-label="搜索" onclick="document.querySelector(&#x22;.DocSearch-Button&#x22;).click()"><div class="i-carbon-search w-4 h-4"></div></button><div class="relative group"><button id="theme-toggle" class="shrink-0 inline-flex items-center justify-center w-9 h-9 rounded-full bg-background/80 ring-0 border-0 text-muted-foreground/70 hover:bg-accent/50 transition-colors" aria-label="切换主题"><div class="i-carbon-sun w-4 h-4"></div></button><div class="absolute right-0 top-full mt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200"><div class="w-9 flex flex-col rounded-xl shadow-sm shadow-accent/5"><button class="w-9 h-9 flex items-center justify-center rounded-full bg-background ring-1 ring-border dark:ring-white/40 border-0 text-muted-foreground/70 hover:bg-accent/50 hover:text-foreground transition-colors my-0.5" onclick="setTheme(&#x22;light&#x22;)" aria-label=""><div class="i-carbon-sun w-4 h-4"></div></button>
<button class="w-9 h-9 flex items-center justify-center rounded-full bg-background ring-1 ring-border dark:ring-white/40 border-0 text-muted-foreground/70 hover:bg-accent/50 hover:text-foreground transition-colors my-0.5" onclick="setTheme(&#x22;dark&#x22;)" aria-label=""><div class="i-carbon-moon w-4 h-4"></div></button>
<button class="w-9 h-9 flex items-center justify-center rounded-full bg-background ring-1 ring-border dark:ring-white/40 border-0 text-muted-foreground/70 hover:bg-accent/50 hover:text-foreground transition-colors my-0.5" onclick="setTheme(&#x22;auto&#x22;)" aria-label=""><div class="i-carbon-screen w-4 h-4"></div></button></div></div></div></div></div></nav><link rel="preconnect" href="https://6O8RM1BUT3-dsn.algolia.net" crossorigin=""><link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/@docsearch/css@3" crossorigin="anonymous"><link rel="stylesheet" href="/css/components/search/docsearch.min.e9ab6523c0591ffe9d81ad080ff72fb1b120253095c4d22c3772cc170c9eec2e.css" integrity="sha256-6atlI8BZH/6dga0ID/cvsbEgJTCVxNIsN3LMFwye7C4=" crossorigin="anonymous"><div id="docsearch"></div><script src="https://cdn.jsdmirror.com/npm/@docsearch/js@3" crossorigin="anonymous" defer></script><script>document.addEventListener("DOMContentLoaded",function(){docsearch({appId:"6O8RM1BUT3",apiKey:"ceb081eaca8bade865cec00ef9e754e8",indexName:"yoghurtlee",container:"#docsearch",placeholder:"Nyanpasu~"})})</script><script>function getTheme(){const e=localStorage.getItem("theme");return e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function setTheme(e){const t=document.documentElement;if(t.classList.remove("light","dark"),e==="dark")t.classList.add("dark");else if(e==="light")t.classList.add("light");else{const e=window.matchMedia("(prefers-color-scheme: dark)").matches;e?t.classList.add("dark"):t.classList.add("light")}localStorage.setItem("theme",e),updateThemeIcon(e)}function updateThemeIcon(e){const t=document.getElementById("theme-toggle"),n=e==="dark"?"i-carbon-moon":e==="light"?"i-carbon-sun":"i-carbon-screen";t.innerHTML=`<div class="${n} w-4 h-4 text-muted-foreground/70 dark:text-muted-foreground-dark/70"></div>`}document.addEventListener("DOMContentLoaded",function(){const e=getTheme();setTheme(e),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("theme")==="auto"&&setTheme("auto")})}),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("nav-menu"),t=document.getElementById("nav-title");let s=window.scrollY;const o=100;function n(){const n=window.scrollY;n>o?(e.style.opacity="0",e.style.pointerEvents="none",t.style.opacity="1",t.style.pointerEvents="auto"):(e.style.opacity="1",e.style.pointerEvents="auto",t.style.opacity="0",t.style.pointerEvents="none"),s=n}window.addEventListener("scroll",n),n()})</script><main class="flex-grow"><div class="container max-w-6xl mx-auto px-4 pt-24 pb-16"><div class="flex gap-16"><div class="relative"><div class="flex gap-8 max-w-6xl mx-auto px-4 py-12 md:py-20"><div class="w-full lg:max-w-3xl"><header class="mb-12"><h1 class="text-3xl font-bold mb-6">园子装修日志（2）</h1></header><link rel="stylesheet" href="/css/components/article/ai-summary.min.2cc7520c09092e75a992b583187a21d1f73b0ef9439f84adeb1a8c4a16636c6a.css" integrity="sha256-LMdSDAkJLnWpkrWDGHoh0fc7DvlDn4St6xqMShZjbGo=" crossorigin="anonymous"><div class="ai-summary" data-component="ai-summary"><input type="checkbox" id="ai-summary__checkbox" class="ai-summary__checkbox absolute opacity-0">
<label for="ai-summary__checkbox" class="cursor-pointer block"><div class="ai-summary__container relative my-8 p-6 rounded-xl border border-border/40 backdrop-blur transition-all duration-300 hover:border-border/60"><div class="ai-summary__header flex items-center justify-between"><div class="ai-summary__title flex items-center gap-3"><div class="i-carbon-ai-status w-5 h-5 text-primary"></div><span class="text-base font-medium">AI 摘要</span></div><div class="ai-summary__controls flex items-center gap-3"><span class="ai-summary__badge px-2.5 py-0.5 text-xs rounded-md text-primary/80 dark:text-primary-dark/80 ring-1 ring-primary/20 dark:ring-primary-dark/20">109酱</span><div class="ai-summary__toggle group bg-inherit border-none ring-1 ring-gray-600 dark:ring-gray-400" aria-label="展开/收起摘要"><div class="ai-summary__icon i-carbon-chevron-down w-5 h-5 text-muted-foreground/60 transition-transform duration-200 ease-out"></div></div></div></div><div class="ai-summary__divider my-4 border-t border-border/30"></div><div class="ai-summary__content"><div class="ai-summary__text text-sm leading-relaxed text-muted-foreground">本文记录了作者最近优化 Hugo 博客的过程，包括优化 GitHub 卡片、重构 CSS 和侧边栏等。优化包括样式、API 逻辑、错误处理等，重构 CSS 采用 SCSS 方法，导入特定页面样式。侧边栏优化了公告、目录、移动端显示和图标，使得代码结构更加整洁。</div></div></div></label></div><article class="prose max-w-none"><p>各位老友们好，我是 Chlorine。继续水文，讲讲这几天摸鱼的经历。</p><p>准确来说应该是我能记得的经历，因为我记性一向不好，而且这几天的 Git commit 也异常多：</p><p></p><figure class="my-8"><img src="https://img.clnya.fun/IMG-20240821195307.avif" alt="630" title="还没算我写文章的时候没提交的" class="mx-auto rounded-lg block" loading="lazy"><figcaption class="mt-3 text-center text-sm text-muted-foreground/70 dark:text-muted-foreground-dark/70">还没算我写文章的时候没提交的</figcaption></figure><p></p><h2 id="优化-github-卡片">优化 GitHub 卡片</h2><p>这几乎是我的每日任务了。由于 GitHub/GitLab/Codeberg 的卡片基本上是一样的，所以说一优化可以优化三次，三倍业绩，三倍快乐，<del>改 bug 也是三倍快乐</del>。</p><p>这次的优化很多，包括但是不限于：</p><ul><li>样式打磨，我的目标就是 Vercel/iOS18 的风格~</li><li>API 逻辑改写，更多地使用 Hugo 模板</li><li>错误处理完善</li><li>使用 license 映射来改进显示</li><li>自动截断过长的描述</li><li>图标更改，采用 Simple Icons 的 GitLab/Codeberg 图标</li><li>去掉父元素的 <code>&#x3C;a></code> 标签，改良整体样式和点击容错性</li></ul><p>此外，我在之前的老朋友 Blowfish 主题那里闲逛的时候发现他们加了 Gitea 短代码，无论谁在写 Hugo shortcode，我小氯都要帮帮场子。直接加上。Gitea 和 Codeberg 的逻辑基本上一样，毕竟 Codeberg 就是基于 Gitea 的。</p><p>顺便说一句，我发现我犯了个非常执杖的错误，就是我已经用 <code>resources.GetRemote</code> 获取 API 的数据了，我居然用 JavaScript 又获取了一次。</p><h2 id="refactor-css">refactor CSS</h2><p>闲着没事去主题原型 Hugo landscape 的仓库看了看，发现恐咖兵糖大佬把 CSS 重构了一下。正好我也一直被无法正确导入 CSS 困扰，于是就动手开始 refactor 了。</p><p>我原本的文件结构大概是：</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>.</span></span>
<span class="line"><span>├── css</span></span>
<span class="line"><span>│   ├── addon.css</span></span>
<span class="line"><span>│   ├── algolia(almost of no use)</span></span>
<span class="line"><span>│   │   ├── algolia_dark.css</span></span>
<span class="line"><span>│   │   └── algolia_light.css</span></span>
<span class="line"><span>│   ├── base.css</span></span>
<span class="line"><span>│   ├── normalize.css</span></span>
<span class="line"><span>│   ├── tailwind.css</span></span>
<span class="line"><span>│   └── whisper.css</span></span>
<span class="line"><span>├── js ...</span></span>
<span class="line"><span>├── json ...</span></span>
<span class="line"><span>└── style.css</span></span></code></pre><p>其中 <code>style.css</code> 是 UnoCSS 自动构建生成的，而我的几乎所有魔改 CSS 都堆在 <code>addon.css</code> 中，看着很难受，维护起来也不方便。</p><p>重构代码时我选择了恐咖兵糖大佬使用的 SCSS 方法：在文件夹中创建 SCSS 索引文件，然后在 <code>css.html</code> 中直接用 Hugo 来解构 SCSS 得到 CSS 导入。一顿拆分重组后得到了：</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>.</span></span>
<span class="line"><span>├── addon</span></span>
<span class="line"><span>│   ├── algolia.css</span></span>
<span class="line"><span>│   ├── fonts.css</span></span>
<span class="line"><span>│   ├── friend.css</span></span>
<span class="line"><span>│   ├── index.scss</span></span>
<span class="line"><span>│   ├── others.css</span></span>
<span class="line"><span>│   ├── twikoo.css</span></span>
<span class="line"><span>│   └── whisper.css</span></span>
<span class="line"><span>├── base</span></span>
<span class="line"><span>│   ├── base.css</span></span>
<span class="line"><span>│   ├── index.scss</span></span>
<span class="line"><span>│   ├── normalize.css</span></span>
<span class="line"><span>│   └── tailwind.css</span></span>
<span class="line"><span>├── main.scss</span></span>
<span class="line"><span>├── test.txt</span></span>
<span class="line"><span>└── uno.css</span></span></code></pre><p>此外，对于一些只在特定页面生效的 CSS 文件（例如 <code>whisper.css</code> 只在《碎语》页面生效），我们直接在页面进行导入，避免不必要的开销。</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">{{ with resources.Get "css/addon/whisper.css" }}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">style</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    {{ .Content | safeCSS }}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">style</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">{{ end }}</span></span></code></pre><h2 id="侧边栏优化">侧边栏优化</h2><p>在我看来，侧边栏是个相当重要的页面元素。我在侧边栏堆了公告（Announcement）、目录（TOC）、分类（Categories）和标签（Tags）。在移动端，它们会显示在主体卡片的下方。</p><h3 id="目录">目录</h3><p>这个目录改得我几乎红温。我原本是直接采用 Hugo 的 <code>{{ .Page.TableOfContents }}</code> 模板，但是其样式令人一言难尽。而且可能是因为 Swup 的原因，目录是没办法随着文章同步更新的。于是，在深思熟虑后，我决定暂时将其去掉。</p><blockquote class="my-6 border-l-4 border-border/60 pl-4"><p>《fix bug by removing the feature》</p></blockquote><h3 id="公告">公告</h3><p>公告组件是我比较看重的东西。我采用的是在 Hugo 配置文件相应选项开启的情况下，直接读取 <code>content</code> 下的 <code>announcement.md</code> 进行展示。其功能比较完善，但是样式看起来并不好看。</p><p>我去查了些资料，找到了一个名为 prose 的布局，经过实验看起来还不错。所以就改成了这样：</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> id</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"announcement-content"</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"collapse-wrapper px-4 overflow-hidden"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    {{ $announcement := .Site.GetPage "announcement" }}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    {{ with $announcement }}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"rounded-xl backdrop-blur-md p-2 mx-4 mb-2 relative md:mx-auto md:max-w-lg"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"prose dark:prose-invert max-w-none text-sm md:text-base"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">            {{ .Content | markdownify }}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    {{ end }}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span></code></pre><h3 id="移动端隐藏组件">移动端隐藏组件</h3><p>我感觉，移动端很少有人会去专门翻最下面的 categories 和 tags，所以我干脆直接把它们 <code>hidden md:block</code> 了。这样最下面就是 profile 和 announcement 了。</p><h3 id="图标">图标</h3><p>从页面的元素选择上，各位老友应该可以看出，我非常喜欢 UnoCSS 的矢量图标，尤其是 IBM 的 Carbon Icons 系列。</p><p>所以我打算给侧边栏的组件加图标。这个不算难，一个 <code>flex</code> 布局，再把图标和标题套在一起就可以了。</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center</span></span>
<span class="line"><span style="color:#50A14F;--shiki-dark:#98C379">before:content-['']</span></span>
<span class="line"><span style="color:#50A14F;--shiki-dark:#98C379">before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]</span></span>
<span class="line"><span style="color:#50A14F;--shiki-dark:#98C379">before:absolute before:left-[-16px] before:top-[5.5px]"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">i</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"i-carbon-data-categorical mr-2"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">>&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">i</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    Categories</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span></code></pre><p>加个边距看上去好看。</p><p>我用的图标分别是：</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">i</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"i-carbon-border-full mr-2"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">>&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">i</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">i</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"i-carbon-data-categorical mr-2"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">>&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">i</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">i</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"i-carbon-tag-group mr-2"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">>&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">i</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span></code></pre><h3 id="partial-化">partial 化</h3><p>我原本的组件样式大部分是写在 <code>sidebar.html</code> 那里的。但是这样让 <code>sidebar.html</code> 看起来很不整洁，所以我把大部分的代码都移动到了相应的部分代码（partial）中。</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">{{/* sidebar.html */}}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> id</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"sidebar"</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#D19A66">    class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"w-full row-start-3 row-end-4 col-span-2 lg:row-start-2 lg:row-end-3 lg:col-span-1 lg:max-w-[17.5rem] onload-animation"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"flex flex-col w-full gap-4 mb-4"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        {{ partial "sidebar/profile.html" . }}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"flex flex-col w-full gap-4 top-4 sticky"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        {{ if .Site.Params.Basic.announcement }}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">widget-layout</span><span style="color:#986801;--shiki-dark:#D19A66"> id</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"announcement-widget"</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"pb-4 card-base"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">            {{ partial "sidebar/announcement.html" . }}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">widget-layout</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        {{ end }}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        </span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">widget-layout</span><span style="color:#986801;--shiki-dark:#D19A66"> id</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"categories-widget"</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"pb-4 card-base hidden md:block"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">            {{ partial "sidebar/categories.html" . }}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">widget-layout</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">widget-layout</span><span style="color:#986801;--shiki-dark:#D19A66"> id</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"tags-widget"</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"pb-4 card-base hidden md:block"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">            {{ partial "sidebar/tags.html" . }}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">widget-layout</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span></code></pre><p>可以看到基本上是一个模子刻出来的，形成可复用打法了属于。</p><h3 id="折叠展开">折叠展开</h3><p>此外还写了个折叠展开的代码。但是感觉现在的 tags 和 categories 都不是很长，因此就没真正加上。</p><h2 id="hello109chan">Hello，109chan</h2><blockquote class="my-6 border-l-4 border-border/60 pl-4"><p>《hello 宇宙最新力作》</p></blockquote><h3 id="前言">前言</h3><p>熟悉博客圈的老友应该知道一个著名的工具：<a href="https://postsummary.zhheo.com/">TianliGPT</a>。这个工具来自洪哥（<a href="https://blog.zhheo.com/">张洪 Heo</a>）和 Tianli，是个自动生成博客文章 AI 摘要的工具。对于希望在听故事之前简单了解其脉络的老友来说是个很好的补益。</p><p>问题是：这个工具收费。虽然不贵，但是以小氯的节俭程度，还是不太舍得花这个钱的。</p><p><del>那你买域名的时候怎么一点也不节俭啊喂！</del></p><p>于是我就开始想替代方法。很巧，在之前写 Java 大作业的时候，我们有一个 feature request 就是 AI summary（用带清的智谱清言 API 生成新闻摘要）。我当时的思路大概是：</p><p>最后实现得非常好，除了学校给的 API SDK 居然不能用，必须 HTTP，害得我和答疑坊的大佬调了半个下午。</p><p>于是我想按照这个思路做一个 AI 摘要。不过，我不太熟悉怎么在 Hugo 里面用数据库，而且我的智谱 API 《只有》一千万 token 的额度，我比较担心用完（<del>你确定你能写这么多？</del>）。</p><p>于是我又想到了薅 CloudFlare 的羊毛。用 Workers 做 JavaScript 运行时，D1 做数据持久化，Workers AI 做摘要。这个免费额度是绝对够的，唯一的问题是我不会。</p><p>穷途末路之下，我想到了我的好伙伴：Quail。</p><p>各位老友应该都知道，我的 newsletter 是通过 <a href="https://quail.ink">Quail</a> 实现的，而 Quail 为每位创作者都免费提供 AI 摘要生成功能。这个摘要直接写在 Markdown 源文件的 YAML front matter 里面，是完全静态的，既不怕丢，也不用执行复杂的 API 请求和数据库调用。</p><p>那么，就是你了。</p><h3 id="设计">设计</h3><p>由于只有 <code>content/posts</code> 中的页面需要加摘要，所以我们直接改动相应的 <code>single.html</code> 即可。位置我选择在封面图和正文之间。</p><p>先用 AI 搓个形：</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"my-4 p-4 bg-neutral-100 dark:bg-neutral-800 rounded-lg shadow-md cursor-pointer transition-transform transform hover:scale-105"</span><span style="color:#986801;--shiki-dark:#D19A66"> id</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"ai-summary-toggle"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"flex items-center justify-between"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">span</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"text-neutral-900 dark:text-neutral-100 font-semibold"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">>AI 摘要&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">span</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">svg</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"w-5 h-5 text-neutral-900 dark:text-neutral-100 transition-transform duration-200 transform"</span><span style="color:#986801;--shiki-dark:#D19A66"> id</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"ai-summary-icon"</span><span style="color:#986801;--shiki-dark:#D19A66"> xmlns</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"http://www.w3.org/2000/svg"</span><span style="color:#986801;--shiki-dark:#D19A66"> fill</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"none"</span><span style="color:#986801;--shiki-dark:#D19A66"> viewBox</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"0 0 24 24"</span><span style="color:#986801;--shiki-dark:#D19A66"> stroke</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"currentColor"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">            &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">path</span><span style="color:#986801;--shiki-dark:#D19A66"> stroke-linecap</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"round"</span><span style="color:#986801;--shiki-dark:#D19A66"> stroke-linejoin</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"round"</span><span style="color:#986801;--shiki-dark:#D19A66"> stroke-width</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"2"</span><span style="color:#986801;--shiki-dark:#D19A66"> d</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"M19 9l-7 7-7-7"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">/></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">svg</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"mt-2 text-neutral-700 dark:text-neutral-300 hidden"</span><span style="color:#986801;--shiki-dark:#D19A66"> id</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"ai-summary-content"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        {{ .Description }}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span></code></pre><p>然后我简单修了下，大概就是这样了：</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"my-4 p-4 border dark:border-color-neutral-600 border-color-neutral rounded-xl shadow-md cursor-pointer transition-transform transform-gpu md:hover:scale-105 shadow-md md:hover:shadow-lg"</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#D19A66">    id</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"ai-summary-toggle"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"flex items-center justify-between pb-3"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"flex items-center"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">            &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">span</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"i-carbon-ai-generate text-neutral-900 dark:text-neutral-100 mr-4"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">>&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">span</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">            &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">span</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"text-lg text-neutral-900 dark:text-neutral-100 font-semibold"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">>AI 摘要&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">span</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"flex items-center"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">            &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">span</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#D19A66">                class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"px-2 py-1 bg-gradient-to-r from-blue-500 to-purple-500 bg-opacity-20 backdrop-blur-md text-neutral-300 rounded-md text-sm mr-2 ring-1 ring-offset-1 ring-indigo-200 dark:ring-indigo-700"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">>109酱&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">span</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">            &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">svg</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"w-5 h-5 text-neutral-900 dark:text-neutral-100 transition-all duration-300 transform hover:scale-110"</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#D19A66">                id</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"ai-summary-icon"</span><span style="color:#986801;--shiki-dark:#D19A66"> xmlns</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"http://www.w3.org/2000/svg"</span><span style="color:#986801;--shiki-dark:#D19A66"> fill</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"none"</span><span style="color:#986801;--shiki-dark:#D19A66"> viewBox</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"0 0 24 24"</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#D19A66">                stroke</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"currentColor"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">                &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">path</span><span style="color:#986801;--shiki-dark:#D19A66"> stroke-linecap</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"round"</span><span style="color:#986801;--shiki-dark:#D19A66"> stroke-linejoin</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"round"</span><span style="color:#986801;--shiki-dark:#D19A66"> stroke-width</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"2"</span><span style="color:#986801;--shiki-dark:#D19A66"> d</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"M19 9l-7 7-7-7"</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> /></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">            &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">svg</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"border-t border-neutral-200 dark:border-neutral-700 my-3"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">>&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#986801;--shiki-dark:#D19A66"> class</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"mt-3 text-neutral-700 dark:text-neutral-300 hidden"</span><span style="color:#986801;--shiki-dark:#D19A66"> id</span><span style="color:#383A42;--shiki-dark:#ABB2BF">=</span><span style="color:#50A14F;--shiki-dark:#98C379">"ai-summary-content"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        {{ .Description }}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    &#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">&#x3C;/</span><span style="color:#E45649;--shiki-dark:#E06C75">div</span><span style="color:#383A42;--shiki-dark:#ABB2BF">></span></span></code></pre><p>移动端的点击放大我关掉了，因为看起来不太舒服。高斯模糊的手艺是跟 GPT 学的，本来想用 <code>var(--primary)</code> （就是我的博客那个一直在变化的主题色），但是不知道为什么没成功。</p><p>使用 <code>description</code> 字段可以保证其尽量都是 AI 摘要，<code>summary</code> 字段我比较喜欢用来扯淡。难绷的是 Quail 的标准 AI 摘要键是 <code>summary</code>，造成我需要手动改一下。已经和作者<a href="https://quail.ink/lyric">歌词经理</a>反馈了，作者说会想办法优化一下。</p><h3 id="why-109chan">Why 109chan？</h3><p>还有个关键问题，为什么这个 AI 摘要助手（迫真）要叫 109 酱？</p><p>这又要说起现实中园子里的一些故事了。在紫操（紫荆操场）旁边，有一座形状比较特别的建筑，叫紫荆学生公寓综合服务楼，由于其形状，我们一般称其为 C 楼。C 楼的 109 号房间是综合服务台，也叫总台。一般来说，有什么问题不知道去哪里问，就可以去总台。由于 AI 摘要的目的是让老友们更省力地阅读园子里的故事，因此我将其命名为 109 酱（109chan）。如果后续有问答之类的服务，应该也会是 109 酱来承担。</p><h2 id="更新依赖">更新依赖</h2><p>npm 有 <code>package-lock.json</code>，pnpm 有 <code>pnpm-lock.yaml</code>，yarn 有 <code>yarn.lock</code>， Bun 有 <code>bun.lockb</code>，这充分说明了对于 JavaScript 包，锁定版本有多么重要。我曾经试着直接对 <code>theme/efimero</code> 的依赖进行更新，结果自然是必遭严惩，样式全都乱了。</p><p>最近闲着没事去 UnoCSS 的<a href="https://unocss.dev">官网</a>的官网看了下，发现已经到 <code>0.62</code> 了，而我的依赖还是 <code>0.60</code> 左右。由于我非常喜欢 UnoCSS，并且确信自己会一直使用，于是我想着更新一下。</p><p>直接删除 <code>node_modules</code> 和 <code>bun.lockb</code>，然后把 <code>package.json</code> 的版本全改成 <code>latest</code>，直接一手 <code>bun i</code> 更新。</p><p>然后构建，不出意料出了很多错误：</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>Failed to load custom icon "copy" in "carbon": TypeError [ERR_IMPORT_ATTRIBUTE_MISSING]: Module "file:///Users/chlorine/Dev/Hugo/themes/efimero/node_modules/@iconify-json/carbon/icons.json" needs an import attribute of "type: json"</span></span>
<span class="line"><span>    at validateAttributes (node:internal/modules/esm/assert:88:15)</span></span>
<span class="line"><span>    at defaultLoad (node:internal/modules/esm/load:133:3)</span></span>
<span class="line"><span>    at async nextLoad (node:internal/modules/esm/hooks:746:22)</span></span>
<span class="line"><span>    at async nextLoad (node:internal/modules/esm/hooks:746:22)</span></span>
<span class="line"><span>    at async nextLoad (node:internal/modules/esm/hooks:746:22)</span></span>
<span class="line"><span>    at async Hooks.load (node:internal/modules/esm/hooks:383:20)</span></span>
<span class="line"><span>    at async handleMessage (node:internal/modules/esm/worker:199:18) {</span></span>
<span class="line"><span>  code: 'ERR_IMPORT_ATTRIBUTE_MISSING'</span></span>
<span class="line"><span>}</span></span></code></pre><p>看来是缺少一个导入类型。在询问 GPT 后，得知改动 <code>uno.config.ts</code> 中的导入部分为动态导入即可：</p><pre class="shiki shiki-themes one-light one-dark-pro" style="background-color:#FAFAFA;--shiki-dark-bg:#282c34;color:#383A42;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#A626A4;--shiki-dark:#C678DD">import</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> { </span><span style="color:#E45649;--shiki-dark:#E06C75">defineConfig</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> } </span><span style="color:#A626A4;--shiki-dark:#C678DD">from</span><span style="color:#50A14F;--shiki-dark:#98C379"> "unocss"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#C678DD">import</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> { </span><span style="color:#E45649;--shiki-dark:#E06C75">presetUno</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> } </span><span style="color:#A626A4;--shiki-dark:#C678DD">from</span><span style="color:#50A14F;--shiki-dark:#98C379"> "unocss"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#C678DD">import</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> { </span><span style="color:#E45649;--shiki-dark:#E06C75">presetIcons</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> } </span><span style="color:#A626A4;--shiki-dark:#C678DD">from</span><span style="color:#50A14F;--shiki-dark:#98C379"> "unocss"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#C678DD">import</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> { </span><span style="color:#E45649;--shiki-dark:#E06C75">presetAttributify</span><span style="color:#383A42;--shiki-dark:#ABB2BF">, </span><span style="color:#E45649;--shiki-dark:#E06C75">presetTypography</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> } </span><span style="color:#A626A4;--shiki-dark:#C678DD">from</span><span style="color:#50A14F;--shiki-dark:#98C379"> "unocss"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#C678DD">import</span><span style="color:#E45649;--shiki-dark:#E06C75"> presetLegacyCompat</span><span style="color:#A626A4;--shiki-dark:#C678DD"> from</span><span style="color:#50A14F;--shiki-dark:#98C379"> '@unocss/preset-legacy-compat'</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#C678DD">import</span><span style="color:#E45649;--shiki-dark:#E06C75"> carbonIcons</span><span style="color:#A626A4;--shiki-dark:#C678DD"> from</span><span style="color:#50A14F;--shiki-dark:#98C379"> '@iconify-json/carbon/icons.json'</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#C678DD">import</span><span style="color:#E45649;--shiki-dark:#E06C75"> mdiIcons</span><span style="color:#A626A4;--shiki-dark:#C678DD"> from</span><span style="color:#50A14F;--shiki-dark:#98C379"> '@iconify-json/mdi/icons.json'</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#C678DD">export</span><span style="color:#E45649;--shiki-dark:#C678DD"> default</span><span style="color:#4078F2;--shiki-dark:#61AFEF"> defineConfig</span><span style="color:#383A42;--shiki-dark:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">    presets</span><span style="color:#0184BC;--shiki-dark:#ABB2BF">:</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#4078F2;--shiki-dark:#61AFEF">        presetAttributify</span><span style="color:#383A42;--shiki-dark:#ABB2BF">(),</span></span>
<span class="line"><span style="color:#4078F2;--shiki-dark:#61AFEF">        presetUno</span><span style="color:#383A42;--shiki-dark:#ABB2BF">(),</span></span>
<span class="line"><span style="color:#4078F2;--shiki-dark:#61AFEF">        presetTypography</span><span style="color:#383A42;--shiki-dark:#ABB2BF">(),</span></span>
<span class="line"><span style="color:#4078F2;--shiki-dark:#61AFEF">        presetIcons</span><span style="color:#383A42;--shiki-dark:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">            collections</span><span style="color:#0184BC;--shiki-dark:#ABB2BF">:</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#4078F2;--shiki-dark:#61AFEF">                carbon</span><span style="color:#0184BC;--shiki-dark:#ABB2BF">:</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> () </span><span style="color:#A626A4;--shiki-dark:#C678DD">=></span><span style="color:#E45649;--shiki-dark:#E06C75"> carbonIcons</span><span style="color:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#4078F2;--shiki-dark:#61AFEF">                mdi</span><span style="color:#0184BC;--shiki-dark:#ABB2BF">:</span><span style="color:#383A42;--shiki-dark:#ABB2BF"> () </span><span style="color:#A626A4;--shiki-dark:#C678DD">=></span><span style="color:#E45649;--shiki-dark:#E06C75"> mdiIcons</span><span style="color:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">            },</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">            scale</span><span style="color:#0184BC;--shiki-dark:#ABB2BF">:</span><span style="color:#986801;--shiki-dark:#D19A66"> 1.2</span><span style="color:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">            warn</span><span style="color:#0184BC;--shiki-dark:#ABB2BF">:</span><span style="color:#986801;--shiki-dark:#D19A66"> true</span><span style="color:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        }),</span></span>
<span class="line"><span style="color:#4078F2;--shiki-dark:#61AFEF">        presetLegacyCompat</span><span style="color:#383A42;--shiki-dark:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E06C75">            commaStyleColorFunction</span><span style="color:#0184BC;--shiki-dark:#ABB2BF">:</span><span style="color:#986801;--shiki-dark:#D19A66"> true</span><span style="color:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">        })</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">    ],</span></span>
<span class="line"><span style="color:#A0A1A7;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // ...</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">});</span></span></code></pre><h2 id="结语">结语</h2><p>除此之外还有一堆优化，我们就不展开说了，像什么优化 Algolia Docsearch 样式之类的。静态博主都是装修爱好者，折腾就完了，把园子装修得漂漂亮亮的。</p><p>明天我考<del>磕墓三</del>科目三，考完之后我就要着手二次备案了。</p></article><div class="mt-12 md:mt-16 p-6 rounded-xl border border-border/40 dark:border-border-dark/40 backdrop-blur"><div class="flex flex-col sm:flex-row gap-6"><div class="hidden sm:block flex-shrink-0"><div class="w-14 h-14 rounded-xl border border-border/40 dark:border-border-dark/40 bg-accent/30 dark:bg-accent-dark/30 flex items-center justify-center"><div class="i-carbon-license w-7 h-7 text-primary/80"></div></div></div><div class="flex-1 space-y-4"><div class="space-y-1"><h3 class="text-base font-medium">版权声明</h3><div class="flex flex-wrap items-center gap-x-2 gap-y-1 text-sm text-muted-foreground/70"><span>本文采用</span>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-primary/80 hover:text-primary transition-colors"><div class="i-carbon-link w-3.5 h-3.5"></div><span>CC BY-NC-SA 4.0</span>
</a><span>许可协议。</span></div></div><div class="text-sm space-y-2 text-muted-foreground/70"><div class="flex items-start gap-2"><div class="i-carbon-checkmark w-4 h-4 mt-0.5 text-primary/70"></div><span>转载请注明出处：<span class="select-all">https://chlor.me/yuanzi-decorating-2/</span></span></div><div class="flex items-start gap-2"><div class="i-carbon-checkmark w-4 h-4 mt-0.5 text-primary/70"></div><span>本文作者：Chlorine</span></div><div class="flex items-start gap-2"><div class="i-carbon-checkmark w-4 h-4 mt-0.5 text-primary/70"></div><span>发布时间：<time class="tabular-nums">2024-08-21 00:00</time></span></div></div></div></div></div><link rel="stylesheet" href="/css/components/comments/twikoo.min.0c1c68a789714e0d50c874179f667a51d380faebfbfe7a1649e72b6e87f4138f.css" integrity="sha256-DBxop4lxTg1QyHQXn2Z6UdOA+uv7/noWSecrbof0E48=" crossorigin="anonymous"><div class="mt-12 md:mt-16 pt-6 md:pt-8 border-t border-border/40 dark:border-border-dark/40"><div class="flex items-center gap-2 mb-8"><div class="i-carbon-chat w-5 h-5 text-primary/80"></div><h3 class="text-lg font-medium">评论</h3></div><div id="twikoo" class="plain-link"></div></div><script src="https://cdn.jsdmirror.com/gh/chlorine3545/customcdn@2b63d63/js/twikoo/1_6_41.min.js" crossorigin="anonymous" defer></script><script>window.addEventListener("load",()=>{twikoo.init({envId:"https://tk.viento.cc",el:"#twikoo",lang:"zh-CN"})})</script><script src="/js/components/twikoo-owo.js" defer></script></div><aside class="hidden lg:block w-64 flex-shrink-0"><div class="sticky top-24 flex flex-col gap-6"><link rel="stylesheet" href="/css/components/article/toc.css"><div class="flex flex-col gap-4"><h3 class="text-sm font-medium text-foreground/80">目录</h3><nav class="text-sm text-foreground/70"><nav id="TableOfContents"><ul><li><a href="#优化-github-卡片">优化 GitHub 卡片</a></li><li><a href="#refactor-css">refactor CSS</a></li><li><a href="#侧边栏优化">侧边栏优化</a><ul><li><a href="#目录">目录</a></li><li><a href="#公告">公告</a></li><li><a href="#移动端隐藏组件">移动端隐藏组件</a></li><li><a href="#图标">图标</a></li><li><a href="#partial-化">partial 化</a></li><li><a href="#折叠展开">折叠展开</a></li></ul></li><li><a href="#hello109chan">Hello，109chan</a><ul><li><a href="#前言">前言</a></li><li><a href="#设计">设计</a></li><li><a href="#why-109chan">Why 109chan？</a></li></ul></li><li><a href="#更新依赖">更新依赖</a></li><li><a href="#结语">结语</a></li></ul></nav></nav></div><div class="flex flex-col gap-4"><h3 class="text-sm font-medium text-foreground/80">阅读进度</h3><div class="relative h-1 bg-border/50 rounded-full overflow-hidden"><div id="reading-progress" class="absolute inset-y-0 left-0 bg-primary/80 transition-all duration-150" style="width:0%"></div></div><div class="text-sm text-muted-foreground text-center"><span id="percent">0</span>% 已读</div></div><script src="/js/components/reading-progress.5f39156caf6576d6ce40fdecfcab492aeda6ea0932e102e04845c9361be5caa8.js" integrity="sha256-XzkVbK9ldtbOQP3s/KtJKu2m6gky4QLgSEXJNhvlyqg=" crossorigin="anonymous" defer></script></div></aside></div><div id="reading-progress-ball" class="lg:hidden fixed right-4 bottom-20 w-12 h-12 rounded-full backdrop-blur z-50 shadow-lg border border-border/20 dark:border-border-dark/20 flex items-center justify-center text-sm font-medium tabular-nums transition-all duration-300 transform translate-y-24 opacity-0">0%</div><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("reading-progress-ball");if(!e)return;const n=document.querySelector("article");if(!n)return;function t(){const s=n.getBoundingClientRect(),r=window.innerHeight,c=-s.top,o=s.height,l=Math.min(r,o),i=o-l;let t=c/i*100;t=Math.min(100,Math.max(0,t));const d=Math.round(t);e.textContent=`${d}%`;const a=t>0&&t<100&&i>0;e.classList.toggle("translate-y-24",!a),e.classList.toggle("opacity-0",!a)}function s(e,t){let s,n=0;return function(...o){const i=Date.now(),a=this;i-n>=t?(e.apply(a,o),n=i):(clearTimeout(s),s=setTimeout(()=>{e.apply(a,o),n=Date.now()},t))}}window.addEventListener("scroll",s(t,100),{passive:!0}),window.addEventListener("resize",s(t,100),{passive:!0}),t()})</script></div></div></div></main></div><footer class="plain-link-container mt-auto py-4 backdrop-blur border-t border-border/50"><div class="container mx-auto px-4"><div class="flex flex-col gap-6"><div class="hidden mt-3 md:flex items-center gap-4 text-sm text-muted-foreground/70"><div class="flex items-center gap-2"><div class="i-carbon-time w-4 h-4"></div><span class="tabular-nums font-mono tracking-wider"><span class="text-primary/70">已运行</span>
<span id="runningtime" class="ml-1" data-start-date="12/15/2023 12:00:00"></span></span></div><script src="/js/components/runtime.9e9d6de2edbc0c1fd1e49fe58f78438aec2e85362f4d69d1494d517bdd32611b.js" integrity="sha256-np1t4u28DB/R5J/lj3hDiuwuhTYvTWnRSU1Re90yYRs=" crossorigin="anonymous" defer></script><span class="w-1 h-1 rounded-full bg-muted-foreground/30"></span><div class="flex items-center gap-2"><div class="i-carbon-text-font w-4 h-4"></div><span>共 <span class="tabular-nums font-mono">235371</span> 字
<span class="mx-1">·</span>
写完一本 简·奥斯汀 的《傲慢与偏见》了!</span></div></div><div class="hidden md:visible h-px bg-border/10"></div><div class="flex flex-col md:flex-row items-center justify-between gap-3 text-sm text-muted-foreground/60"><div class="flex flex-col md:flex-row items-center gap-2 md:gap-4"><span>© 2025 Chlorine</span><div class="flex items-center gap-4"><span>Powered by <a href="https://gohugo.io" target="_blank" rel="noopener noreferrer" class="hover:text-primary transition-colors">Hugo</a></span>
<span>Theme <a href="https://github.com/chlorine3545/hugo-theme-hermeneutics" target="_blank" rel="noopener noreferrer" class="hover:text-primary transition-colors">Hermeneutics</a></span></div></div><div class="flex flex-col md:flex-row items-center gap-2 md:gap-4"><a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 hover:text-primary transition-colors"><span>京ICP备2024074926号-5</span>
</a><span class="hidden md:inline text-border/40">|</span>
<a href="http://www.beian.gov.cn/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 hover:text-primary transition-colors"><span>京公网安备11010802044863号</span>
</a><span class="hidden md:inline text-border/40">|</span>
<a href="https://icp.gov.moe/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 hover:text-primary transition-colors"><span>萌ICP备20240711号</span></a></div></div></div></div></footer><footer><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("loading-screen");let t;function n(){e&&(e.style.opacity="0",setTimeout(()=>{e.style.display="none"},400)),t&&(clearTimeout(t),t=null)}function s(){e&&(e.style.display="flex",e.offsetHeight,e.style.opacity="1",t=setTimeout(n,3e3))}window.addEventListener("load",n),window.addEventListener("pageshow",function(e){e.persisted&&n()}),document.addEventListener("click",function(e){const t=e.target.closest("a");t&&t.href&&!t.href.startsWith("#")&&!t.href.includes("#")&&t.href!==window.location.href&&!t.hasAttribute("download")&&t.target!=="_blank"&&t.hostname===window.location.hostname&&(e.preventDefault(),s(),setTimeout(()=>{window.location.href=t.href},500))}),n()})</script></footer></body></html>